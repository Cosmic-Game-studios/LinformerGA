<x-app-layout>
    {{-- Rechte Sidebar mit Datum/Dateien --}}
    <x-app-marginal class="bg-body border-start" style="min-width:280px;max-width:320px">
        <div class="d-flex flex-column h-100">
            {{-- Header --}}
            <div class="py-2 px-3 border-bottom bg-body-tertiary fw-semibold text-uppercase small sticky-top" style="z-index:2;">
                <i class="fas fa-list-ul me-2"></i> Log-Dateien
            </div>

```
        {{-- Statistiken --}}
        <div class="p-3 border-bottom bg-body-secondary">
            <div class="small text-body-secondary mb-2">Aktueller Tag</div>
            <div class="row g-2 small">
                <div class="col-6">
                    <div class="text-center p-2 bg-danger text-white rounded">
                        <div class="fw-bold">{{ $stats['errors'] }}</div>
                        <div style="font-size:0.7rem">ERRORS</div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="text-center p-2 bg-warning text-dark rounded">
                        <div class="fw-bold">{{ $stats['warnings'] }}</div>
                        <div style="font-size:0.7rem">WARNINGS</div>
                    </div>
                </div>
            </div>
            <div class="mt-2 small text-body-secondary">
                <i class="fas fa-clock me-1"></i> 24h: {{ $stats['last_24h'] }} Einträge<br>
                <i class="fas fa-percentage me-1"></i> Error-Rate: {{ $stats['error_rate'] }}%
            </div>
        </div>
        
        {{-- Hilfe-Panel --}}
        <div class="p-3 border-bottom bg-info-subtle">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h6 class="mb-0 text-info"><i class="fas fa-question-circle me-1"></i> Hilfe</h6>
                <button class="btn btn-sm btn-link p-0" onclick="toggleHelp()" id="helpToggle">
                    <i class="fas fa-chevron-down"></i>
                </button>
            </div>
            <div id="helpContent" class="small">
                <div class="mb-2"><strong>Filter:</strong></div>
                <div class="mb-1">• <strong>Level:</strong> ERROR/WARNING/INFO filtern</div>
                <div class="mb-1">• <strong>Zeit:</strong> Von/Bis Datum + Uhrzeit</div>
                <div class="mb-1">• <strong>Suche:</strong> Text oder Regex (/pattern/)</div>
                <div class="mb-2">• <strong>Gruppierung:</strong> Ähnliche Errors zusammenfassen</div>
                
                <div class="mb-2"><strong>Aktionen:</strong></div>
                <div class="mb-1">• <i class="fas fa-chevron-right"></i> Details aufklappen</div>
                <div class="mb-1">• <i class="fas fa-copy"></i> Text kopieren</div>
                <div class="mb-1">• <i class="fas fa-search-plus"></i> Ähnliche markieren</div>
                
                <div class="mb-2"><strong>Auto-Refresh:</strong></div>
                <div class="mb-1">Lädt Seite alle 30s neu</div>
            </div>
        </div>
        
        {{-- Datei-Liste --}}
        <div class="flex-grow-1 overflow-auto">
            <div class="list-group list-group-flush">
                @foreach($availableDates as $item)
                    @php
                        $d      = $item['date'];
                        $size   = $item['size'];
                        $active = $d === $currentDate;
                        $url    = route('admin.errorlog.index', array_merge(request()->query(), ['date'=>$d]));
                    @endphp
                    <a href="{{ $url }}"
                       class="list-group-item list-group-item-action d-flex justify-content-between align-items-center
                              border-0 py-3 pe-3 ps-4 {{ $active ? 'active bg-primary text-white shadow-sm' : 'sidebar-item' }}">
                        <span class="text-truncate" style="max-width:140px">
                            <i class="fas fa-file-alt me-2 text-body-secondary"></i>
                            laravel-{{ $d }}.log
                        </span>
                        <small class="badge bg-body-secondary text-body rounded-pill">
                            {{ number_format($size/1024,1) }} KB
                        </small>
                    </a>
                @endforeach
            </div>
        </div>
    </div>
</x-app-marginal>

{{-- Hauptbereich --}}
<x-app-content>
    <div class="card border-0 shadow-sm my-4" style="border-radius:1.2rem">
        {{-- Erweiterte Filter-Leiste --}}
        <div class="card-header bg-body-tertiary border-0 px-4 py-3" style="border-radius:1.2rem 1.2rem 0 0">
            {{-- Erste Zeile: Basis-Filter --}}
            <div class="d-flex flex-wrap align-items-center gap-3 mb-3">
                {{-- Datumsauswahl --}}
                <div class="d-flex align-items-center gap-2">
                    <label class="small mb-0 text-body-secondary">Datum:</label>
                    <select id="dateSelect" class="form-select form-select-sm w-auto" onchange="navigateWithFilter('date', this.value)">
                        @foreach($availableDates as $it)
                            <option value="{{ $it['date'] }}" {{ $it['date']==$currentDate?'selected':'' }}>
                                {{ $it['date'] }}
                            </option>
                        @endforeach
                    </select>
                </div>

                {{-- Level-Filter --}}
                <div class="btn-group" role="group" aria-label="Log-Level filtern">
                    <button type="button" class="btn btn-sm btn-outline-secondary level-btn {{ $filters['level']=='all'?'active':'' }}" onclick="navigateWithFilter('level', 'all')">Alle</button>
                    <button type="button" class="btn btn-sm btn-outline-secondary level-btn {{ $filters['level']=='error'?'active':'' }}" onclick="navigateWithFilter('level', 'error')">ERROR</button>
                    <button type="button" class="btn btn-sm btn-outline-secondary level-btn {{ $filters['level']=='warning'?'active':'' }}" onclick="navigateWithFilter('level', 'warning')">WARNUNG</button>
                    <button type="button" class="btn btn-sm btn-outline-secondary level-btn {{ $filters['level']=='info'?'active':'' }}" onclick="navigateWithFilter('level', 'info')">INFO</button>
                </div>

                {{-- Zeilen/Seite --}}
                <div class="d-flex align-items-center gap-2">
                    <label class="small mb-0 text-body-secondary">Zeilen:</label>
                    <select id="perPageSelect" class="form-select form-select-sm w-auto">
                        @foreach($perPageOptions as $opt)
                            <option value="{{ $opt }}" {{ $opt==$perPage?'selected':'' }}>{{ $opt }}</option>
                        @endforeach
                    </select>
                </div>

                {{-- Auto-Refresh Toggle --}}
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="autoRefresh" onchange="toggleAutoRefresh(this.checked)">
                    <label class="form-check-label small text-body-secondary" for="autoRefresh">
                        Auto-Refresh <span id="refreshCounter"></span>
                    </label>
                </div>
            </div>

            {{-- Zweite Zeile: Erweiterte Suche --}}
            <div class="d-flex flex-wrap align-items-center gap-3 mb-3">
                {{-- Volltextsuche --}}
                <div class="input-group input-group-sm flex-grow-1" style="min-width:250px;max-width:400px">
                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                    <input id="searchInput" type="text" class="form-control" placeholder="Suche... (Regex mit /pattern/)" 
                           value="{{ $filters['search'] }}" oninput="debounceSearch(this.value)">
                    <button class="btn btn-outline-secondary" type="button" onclick="clearSearch()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                {{-- Regex Toggle --}}
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="useRegex" {{ $filters['use_regex']?'checked':'' }} onchange="navigateWithFilter('use_regex', this.checked)">
                    <label class="form-check-label small" for="useRegex">Regex</label>
                </div>

                {{-- Gruppierung Toggle --}}
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="groupSimilar" {{ $filters['group_similar']?'checked':'' }} onchange="navigateWithFilter('group_similar', this.checked)">
                    <label class="form-check-label small" for="groupSimilar">Gruppierung</label>
                </div>
            </div>

            {{-- Dritte Zeile: Zeitbereich-Filter --}}
            <div class="d-flex flex-wrap align-items-center gap-3">
                {{-- Zeitbereich --}}
                <div class="d-flex align-items-center gap-2">
                    <label class="small mb-0 text-body-secondary">Von:</label>
                    <input type="datetime-local" id="fromTime" class="form-control form-control-sm" 
                           value="{{ $filters['from_time'] }}" style="width:180px">
                </div>
                <div class="d-flex align-items-center gap-2">
                    <label class="small mb-0 text-body-secondary">Bis:</label>
                    <input type="datetime-local" id="toTime" class="form-control form-control-sm" 
                           value="{{ $filters['to_time'] }}" style="width:180px">
                </div>
                <button class="btn btn-sm btn-outline-secondary" onclick="setTimeRange('today')">Heute</button>
                <button class="btn btn-sm btn-outline-secondary" onclick="setTimeRange('last_hour')">Letzte Stunde</button>
                <button class="btn btn-sm btn-outline-secondary" onclick="clearTimeRange()">Zurücksetzen</button>

                {{-- Actions --}}
                <div class="btn-group ms-auto">
                    <a href="{{ route('admin.errorlog.download', ['file'=>$currentFile]) }}"
                       class="btn btn-sm btn-body-secondary" data-bs-toggle="tooltip" title="Original-Datei herunterladen">
                        <i class="fas fa-download"></i>
                    </a>
                    <form action="{{ route('admin.errorlog.clear') }}" method="POST" class="d-inline" onsubmit="return confirm('Alle älteren Logs löschen?');">
                        @csrf @method('DELETE')
                        <button type="submit" class="btn btn-sm btn-danger" data-bs-toggle="tooltip" title="Alte Logs löschen">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        {{-- Log-Tabelle mit Stack-Trace-Viewer --}}
        <div class="card-body bg-body p-0" style="max-height:70vh; overflow:auto">
            <table class="table table-sm table-hover align-middle mb-0" style="font-family:'Fira Code','Consolas',monospace;font-size:.9rem">
                <thead class="small text-body-secondary sticky-top bg-body-tertiary">
                    <tr>
                        <th style="width:30px"></th>
                        <th style="width:80px">Level</th>
                        <th style="width:160px">Zeit</th>
                        <th>Nachricht</th>
                        <th style="width:80px">Aktionen</th>
                    </tr>
                </thead>
                <tbody id="logTable">
                    @foreach($logs as $index => $entry)
                        @php
                            $lvl = $entry['level'];
                            $color = $lvl === 'error' ? 'bg-danger text-white'
                                : ($lvl === 'warning' ? 'bg-warning text-dark' : 'bg-info text-dark');
                            $hasStackTrace = !empty($entry['stack_trace']);
                            $hasContext = !empty($entry['context']);
                            $isGrouped = isset($entry['is_grouped']) && $entry['is_grouped'];
                        @endphp
                        
                        {{-- Haupt-Log-Zeile --}}
                        <tr class="log-row border-bottom" data-level="{{ $lvl }}" data-index="{{ $index }}">
                            <td class="text-center">
                                @if($hasStackTrace || $hasContext || $isGrouped)
                                    <button class="btn btn-sm btn-link p-0 expand-btn" onclick="toggleDetails({{ $index }})" data-bs-toggle="tooltip" title="Details anzeigen">
                                        <i class="fas fa-chevron-right" id="chevron-{{ $index }}"></i>
                                    </button>
                                @endif
                            </td>
                            
                            <td>
                                <span class="badge rounded-pill px-2 py-1 {{ $color }}">
                                    {{ strtoupper($lvl) }}
                                    @if($isGrouped)
                                        <span class="badge bg-light text-dark ms-1">{{ $entry['count'] }}</span>
                                    @endif
                                </span>
                            </td>
                            
                            <td class="small text-nowrap text-body-secondary">
                                {{ \Carbon\Carbon::parse($entry['timestamp'])->format('d.m. H:i:s') }}
                                @if($isGrouped)
                                    <br><small class="text-muted">Zuletzt: {{ \Carbon\Carbon::parse($entry['latest_occurrence'])->format('H:i:s') }}</small>
                                @endif
                            </td>
                            
                            <td class="text-wrap">
                                <div class="log-message">{{ $entry['message'] }}</div>
                                @if($isGrouped)
                                    <small class="text-muted">{{ $entry['count'] }} ähnliche Vorkommen</small>
                                @endif
                            </td>
                            
                            <td>
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-secondary btn-sm" onclick="copyToClipboard({{ $index }})" data-bs-toggle="tooltip" title="Kopieren">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    @if($lvl === 'error')
                                        <button class="btn btn-outline-warning btn-sm" onclick="highlightSimilar('{{ $entry['hash'] ?? md5($entry['message']) }}')" data-bs-toggle="tooltip" title="Ähnliche markieren">
                                            <i class="fas fa-search-plus"></i>
                                        </button>
                                    @endif
                                </div>
                            </td>
                        </tr>

                        {{-- Details-Zeile (ausklappbar) --}}
                        @if($hasStackTrace || $hasContext || $isGrouped)
                            <tr class="log-details d-none" id="details-{{ $index }}">
                                <td></td>
                                <td colspan="4" class="p-3 bg-body-secondary">
                                    {{-- Stack Trace --}}
                                    @if($hasStackTrace)
                                        <div class="mb-3">
                                            <h6 class="text-danger mb-2"><i class="fas fa-bug me-2"></i>Stack Trace:</h6>
                                            <div class="stack-trace bg-dark text-light p-3 rounded" style="font-size:0.8rem;max-height:300px;overflow-y:auto;">
                                                @foreach($entry['stack_trace'] as $traceLine)
                                                    <div class="stack-line">{{ $traceLine }}</div>
                                                @endforeach
                                            </div>
                                        </div>
                                    @endif

                                    {{-- Context --}}
                                    @if($hasContext)
                                        <div class="mb-3">
                                            <h6 class="text-info mb-2"><i class="fas fa-info-circle me-2"></i>Context:</h6>
                                            <div class="context bg-body p-2 rounded border" style="font-size:0.8rem;">
                                                @foreach($entry['context'] as $contextLine)
                                                    <div>{{ $contextLine }}</div>
                                                @endforeach
                                            </div>
                                        </div>
                                    @endif

                                    {{-- Gruppierte Einträge --}}
                                    @if($isGrouped && isset($entry['similar_entries']))
                                        <div class="mb-3">
                                            <h6 class="text-warning mb-2"><i class="fas fa-layer-group me-2"></i>Ähnliche Einträge ({{ count($entry['similar_entries']) }}):</h6>
                                            <div class="similar-entries" style="max-height:200px;overflow-y:auto;">
                                                @foreach(array_slice($entry['similar_entries'], 0, 10) as $similar)
                                                    <div class="border-bottom py-1 small">
                                                        <span class="text-muted">{{ \Carbon\Carbon::parse($similar['timestamp'])->format('H:i:s') }}</span>
                                                        - {{ Str::limit($similar['message'], 100) }}
                                                    </div>
                                                @endforeach
                                                @if(count($entry['similar_entries']) > 10)
                                                    <div class="text-muted small">... und {{ count($entry['similar_entries']) - 10 }} weitere</div>
                                                @endif
                                            </div>
                                        </div>
                                    @endif

                                    {{-- Rohdaten --}}
                                    <div>
                                        <h6 class="text-secondary mb-2"><i class="fas fa-code me-2"></i>Raw Log:</h6>
                                        <div class="raw-log bg-body-tertiary p-2 rounded border small text-break" style="font-family:monospace;">
                                            {{ $entry['raw'] }}
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        @endif
                    @endforeach
                </tbody>
            </table>
        </div>

        {{-- Pagination mit Info --}}
        <div class="card-footer bg-body border-0 d-flex justify-content-between align-items-center py-3" style="border-radius:0 0 1.2rem 1.2rem">
            <div class="small text-body-secondary">
                Zeige {{ $logs->firstItem() ?? 0 }} - {{ $logs->lastItem() ?? 0 }} von {{ $logs->total() }} Einträgen
                @if(!empty($filters['search']) || $filters['level'] !== 'all' || !empty($filters['from_time']))
                    <span class="badge bg-primary ms-2">Gefiltert</span>
                @endif
            </div>

            @if($logs->hasPages())
            <nav>
                <ul class="pagination justify-content-center my-0 small">
                    <li class="page-item {{ $logs->onFirstPage()?'disabled':'' }}">
                        <a class="page-link px-2" href="{{ $logs->appends(request()->query())->previousPageUrl() }}" rel="prev">
                            <span style="font-size:.8em">&#8592;</span> <span class="d-none d-md-inline">Zurück</span>
                        </a>
                    </li>
                    @php
                        $cur   = $logs->currentPage();
                        $last  = $logs->lastPage();
                        $start = max(1,$cur-2);
                        $end   = min($last,$cur+2);
                    @endphp
                    @for($p=$start;$p<=$end;$p++)
                        <li class="page-item {{ $p==$cur?'active':'' }}">
                            <a class="page-link px-2" href="{{ $logs->appends(request()->query())->url($p) }}">{{ $p }}</a>
                        </li>
                    @endfor
                    <li class="page-item {{ $logs->hasMorePages()?'':'disabled' }}">
                        <a class="page-link px-2" href="{{ $logs->appends(request()->query())->nextPageUrl() }}" rel="next">
                            <span class="d-none d-md-inline">Weiter</span> <span style="font-size:.8em">&#8594;</span>
                        </a>
                    </li>
                </ul>
            </nav>
            @endif
        </div>
    </div>
</x-app-content>
```

</x-app-layout>

<script>
// Aktuelle URL-Parameter
var currentParams = new URL(window.location).searchParams;

// 1. EINFACHE FILTER-NAVIGATION
function navigateWithFilter(key, value) {
    var url = new URL(window.location);
    
    if (value && value !== 'all' && value !== '' && value !== false) {
        url.searchParams.set(key, value);
    } else {
        url.searchParams.delete(key);
    }
    
    // Seite immer zurücksetzen bei neuen Filtern
    url.searchParams.delete('page');
    
    window.location.href = url.toString();
}

// 2. DATUM ÄNDERN
function applyFilter(key, value, button = null) {
    navigateWithFilter(key, value);
}

// 3. ZEILEN PRO SEITE - KORRIGIERT
function changePerPage() {
    var select = document.getElementById('perPageSelect');
    navigateWithFilter('per_page', select.value);
}

// 4. ZEITBEREICH-FILTER - KORRIGIERT
function setTimeRange(range) {
    var now = new Date();
    var fromTime, toTime;
    
    if (range === 'today') {
        var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
        fromTime = today.toISOString().slice(0, 16);
        toTime = now.toISOString().slice(0, 16);
    } else if (range === 'last_hour') {
        fromTime = new Date(now.getTime() - 60*60*1000).toISOString().slice(0, 16);
        toTime = now.toISOString().slice(0, 16);
    }
    
    // Beide Felder aktualisieren
    document.getElementById('fromTime').value = fromTime;
    document.getElementById('toTime').value = toTime;
    
    // Navigation mit beiden Parametern
    var url = new URL(window.location);
    url.searchParams.set('from_time', fromTime);
    url.searchParams.set('to_time', toTime);
    url.searchParams.delete('page');
    window.location.href = url.toString();
}

function clearTimeRange() {
    var url = new URL(window.location);
    url.searchParams.delete('from_time');
    url.searchParams.delete('to_time');
    url.searchParams.delete('page');
    window.location.href = url.toString();
}

// 5. SUCHE MIT DEBOUNCE - KORRIGIERT
var searchTimeout = null;
function debounceSearch(value) {
    if (searchTimeout) clearTimeout(searchTimeout);
    searchTimeout = setTimeout(function() {
        navigateWithFilter('search', value);
    }, 800);
}

function clearSearch() {
    document.getElementById('searchInput').value = '';
    navigateWithFilter('search', '');
}

// 6. DETAILS ANZEIGEN/VERSTECKEN
function toggleDetails(index) {
    var detailsRow = document.getElementById('details-' + index);
    var chevron = document.getElementById('chevron-' + index);
    
    if (!detailsRow || !chevron) return;
    
    if (detailsRow.classList.contains('d-none')) {
        detailsRow.classList.remove('d-none');
        chevron.classList.remove('fa-chevron-right');
        chevron.classList.add('fa-chevron-down');
    } else {
        detailsRow.classList.add('d-none');
        chevron.classList.remove('fa-chevron-down');
        chevron.classList.add('fa-chevron-right');
    }
}

// 7. AUTO-REFRESH
var autoRefreshInterval = null;
function toggleAutoRefresh(enabled) {
    if (enabled) {
        var counter = 30;
        document.getElementById('refreshCounter').textContent = '(30s)';
        
        autoRefreshInterval = setInterval(function() {
            counter--;
            document.getElementById('refreshCounter').textContent = '(' + counter + 's)';
            
            if (counter <= 0) {
                window.location.reload();
            }
        }, 1000);
    } else {
        if (autoRefreshInterval) {
            clearInterval(autoRefreshInterval);
            autoRefreshInterval = null;
        }
        document.getElementById('refreshCounter').textContent = '';
    }
}

// 8. KOPIEREN
function copyToClipboard(index) {
    var row = document.querySelector('[data-index="' + index + '"]');
    if (!row) return;
    
    var message = row.querySelector('.log-message');
    if (!message) return;
    
    var text = message.textContent;
    
    if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(function() {
            showCopyFeedback(index);
        });
    } else {
        // Fallback für ältere Browser
        var textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        showCopyFeedback(index);
    }
}

function showCopyFeedback(index) {
    var btn = document.querySelector('[data-index="' + index + '"] .fa-copy');
    if (btn) {
        btn.classList.remove('fa-copy');
        btn.classList.add('fa-check', 'text-success');
        setTimeout(function() {
            btn.classList.remove('fa-check', 'text-success');
            btn.classList.add('fa-copy');
        }, 1500);
    }
}

// 9. ÄHNLICHE MARKIEREN - IMPLEMENTIERT
function highlightSimilar(hash) {
    // Alle bisherigen Markierungen entfernen
    document.querySelectorAll('.log-row').forEach(function(row) {
        row.classList.remove('table-warning');
    });
    
    // Alle Zeilen mit gleichem Hash markieren
    var count = 0;
    document.querySelectorAll('.log-row').forEach(function(row) {
        var message = row.querySelector('.log-message');
        if (message) {
            var rowHash = btoa(message.textContent).substring(0, 8); // Einfacher Hash
            if (rowHash === hash.substring(0, 8)) {
                row.classList.add('table-warning');
                count++;
            }
        }
    });
    
    // Feedback anzeigen
    alert('Markiert: ' + count + ' ähnliche Einträge');
}

// 10. HILFE-PANEL
function toggleHelp() {
    var content = document.getElementById('helpContent');
    var toggle = document.getElementById('helpToggle').querySelector('i');
    
    if (content.style.display === 'none') {
        content.style.display = 'block';
        toggle.classList.remove('fa-chevron-right');
        toggle.classList.add('fa-chevron-down');
    } else {
        content.style.display = 'none';
        toggle.classList.remove('fa-chevron-down');
        toggle.classList.add('fa-chevron-right');
    }
}

// EVENT-LISTENERS BEIM LADEN
document.addEventListener('DOMContentLoaded', function() {
    // Zeilen pro Seite Event
    var perPageSelect = document.getElementById('perPageSelect');
    if (perPageSelect) {
        perPageSelect.onchange = function() {
            navigateWithFilter('per_page', this.value);
        };
    }
    
    // Zeit-Filter Events
    var fromTime = document.getElementById('fromTime');
    var toTime = document.getElementById('toTime');
    
    if (fromTime) {
        fromTime.onchange = function() {
            navigateWithFilter('from_time', this.value);
        };
    }
    
    if (toTime) {
        toTime.onchange = function() {
            navigateWithFilter('to_time', this.value);
        };
    }
    
    // Tooltips
    try {
        if (typeof bootstrap !== 'undefined') {
            var tooltips = document.querySelectorAll('[data-bs-toggle="tooltip"]');
            for (var i = 0; i < tooltips.length; i++) {
                new bootstrap.Tooltip(tooltips[i]);
            }
        }
    } catch(e) {}
    
    // Hilfe standardmäßig eingeklappt
    document.getElementById('helpContent').style.display = 'none';
    document.getElementById('helpToggle').querySelector('i').classList.add('fa-chevron-right');
});
</script>

<style>
.sidebar-item{background:var(--bs-body-bg)!important;color:var(--bs-body-color)!important;transition:.2s}
.sidebar-item:hover{background:var(--bs-tertiary-bg)!important;color:var(--bs-body-color)!important}
.list-group-item.active{background:#0d6efd!important;color:#fff!important}
.card,.pagination .page-item.active .page-link{background:var(--bs-body-bg)!important}
.card-header,.card-footer{background:var(--bs-body-tertiary)!important}
.btn-body-secondary{background:var(--bs-secondary-bg)!important;color:var(--bs-body-color)!important;border:none!important}
.btn-body-secondary:hover{background:var(--bs-tertiary-bg)!important}
.level-btn.active{background:#0d6efd!important;border-color:#0d6efd!important;color:white!important}

/* Stack Trace Styling */
.stack-trace .stack-line:hover{background:rgba(255,255,255,0.1)}
.log-details{border-top:2px solid var(--bs-primary)!important}
.expand-btn{color:var(--bs-body-color)!important}
.expand-btn:hover{color:var(--bs-primary)!important}

/* Ähnliche Error-Markierung */
.table-warning{background-color:#fff3cd!important;border-color:#ffc107!important}

/* Performance */
.log-row{transition:background-color 0.1s ease}
.log-row:hover{background:var(--bs-tertiary-bg)!important}

/* Responsive */
@media (max-width: 768px) {
    .card-header .d-flex{flex-direction:column!important}
    .card-header .gap-3{gap:1rem!important}
}
</style>